/**
 * Baltazzar Gridder
 * Versão: 0.1.1
 * Módulo front-end de tabulação de dados.
 * Autor: Victor Bastos
 */
this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates["gridder/gridder.tpl"]=Handlebars.template(function(t,e,s,l,a){return this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,t.helpers),a=a||{},'<table class="table">\r\n	<thead>\r\n		<tr></tr>\r\n	</thead>\r\n	<tbody></tbody>\r\n</table>'}),define("templates",function(){}),define("views/gridder",["require","exports","module","marionette"],function(require,exports,module){var Marionette=require("marionette");require(["../templates"]),module.exports=Marionette.ItemView.extend({template:"gridder/gridder.tpl",lastColOptions:null,changeValuesOptions:null,getColsCallback:null,getRowsCallback:null,initialize:function(t){this.collection=t.collection,this.render(),this.listenTo(this.collection,"all",_.debounce(function(){this.render(),this.getColsCallback&&this.getCols(this.getColsCallback),this.getRowsCallback&&this.getRows(this.getRowsCallback),this.lastColOptions&&this.setLastCol(this.lastColOptions),this.changeValuesOptions&&this.changeValues(this.changeValuesOptions)}),300)},onRender:function(){this.setHeaders(),this.setValues(),this.setCssClasses()},changeValues:function(t){var e=this.$("table tbody td");_.each(t,function(t,s){_.each(e,function(e){$(e).html()==s&&$(e).html(t)})}),this.changeValuesOptions=t},getCols:function(t){_.each(this.$("table td"),t),this.getColsCallback=t},getRows:function(t){_.each(this.$("table tr"),t),this.getRowsCallback=t},setLastCol:function(t){var e=this;t.header=t.header?t.header:"",this.collection.length>0&&(this.$("table thead tr").append("<th>"+t.header+"</th>"),_.each(this.$("table tbody tr"),function(s){var l=t.elements.join(" "),a=e.collection.get(s.id);l=l.replace(/\$\{(\w*)\}/gi,function(t,e){return a.get(e)}),$(s).append("<td/>").children("td:last").css("width","1px").append(l)})),this.lastColOptions=t},setHeaders:function(){var t=_.values(this.options.headers),e=[];_.each(t,function(t){e.push("<th>"+t+"</th>")}),this.$("table thead tr").html(e)},setValues:function(){var values=_.keys(this.options.headers),trs=[],that=this;this.collection.length>0?(_.each(this.collection.models,function(model){var tds=[],list=[];_.each(values,function(val){val=val.split(".");var attrs="";_.each(val,function(t,e){attrs+=val.length==e+1?"val["+e+"]":"val["+e+"]]["}),list.push(eval("model.attributes["+attrs+"]"))}),_.each(list,function(t,e){var s="cell-"+values[e].replace(/\./g,"-");void 0===t&&(t=that.options.nullCell?that.options.nullCell:""),tds.push('<td class="'+s+'">'+t+"</td>")}),trs.push('<tr id="'+model.id+'">'+tds.join("")+"</tr>")}),that.$("table tbody").html(trs.join(""))):that.$("table tbody").html('<tr><td colspan="'+values.length+'"><strong>'+that.options.nullCollection+"</strong></td></tr>")},setCssClasses:function(){this.$("table").addClass(this.options.cssClasses.join(" "))}})}),define("gridder",["require","exports","module","jquery","./views/gridder"],function(t){var e=t("jquery"),s=t("./views/gridder");e.fn.Gridder=function(t){return t.el=this,new s(t)}});