<html lang="pt-br">
	<head>
		<meta charset="UTF-8">
		<title>Component Test</title>
		<link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
		<script src="../src/libs/jquery.js"></script>
		<script src="../src/libs/underscore.js"></script>
		<script src="../src/libs/backbone.js"></script>
		<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
		<style>
			body {
				background: #f5f5f5;
			}
			table {
				font-size: 12px;
				background: #ffffff;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<h2 class="text-info">Gridder</h2>
			<div id="gridPatos"></div>
		</div>

		<script src="../gridder.js"></script>
		<script type="text/javascript">
			$(document).on('click', '.btn-teste', function(ev) {
				ev.preventDefault();

				alert(ev.currentTarget.id + ' clicked!');
			})

			var Gridder = baltazzar.gridder;

			var Patos = new Backbone.Collection([
				{ id: 1, nome: 'Hugo', apelido: 'Huguinho', hobby: { nome: 'Jogar Bola'} },
				{ id: 2, nome: 'Jos√©', apelido: 'Zezinho', hobby: { nome: 'Nadar' } },
				{ id: 3, nome: 'Luiz', apelido: 'Luizinho', hobby: { nome: 'Ler' } }
			]);

			var gridPatos = new Gridder({
				el: '#gridPatos',
				cssClasses: ['table-hover', 'table-condensed', 'table-fixed'],
				collection: Patos,
				headers: ['nome:Nome', 'apelido:Apelido', 'hobby.nome:Hobby']
			});

			gridPatos.changeValues({
				'Huguinho': '<span class="badge">Huguinho</span>',
				'Zezinho': '<span class="badge">Zezinho</span>',
				'Luizinho': '<span class="badge">Luizinho</span>',
				'Donald': '<span class="badge">Donald</span>'
			});

			setTimeout(function() {
				gridPatos.addCols([
					{
						position: 'last',
						header: '',
						content: '<button class="btn btn-xs btn-danger btn-teste" id="{{id}}">Detalhes</button>'
					},
					{
						position: 'last',
						header: '',
						content: '<button class="btn btn-xs btn-primary btn-teste" id="{{id}}">Detalhes</button>'
					}
				]);
			});

			setInterval(function() {
				var oldPatos = Patos.toJSON();

				Patos.reset();

				setTimeout(function() {
					Patos.reset(oldPatos);
				}, 5000);

			}, 5000);
		</script>
	</body>
</html>
